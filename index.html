<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Pickup & Attack Demo (JavaScript + Canvas)</title>
	<style>
		html,body{height:100%;margin:0;font-family:Inter,Arial,Helvetica,sans-serif}
		/* place page content at the top so the canvas sits immediately under the top edge */
		body{display:flex;flex-direction:column;align-items:center;justify-content:flex-start}
		#gameCanvas{display:block;margin:0 auto;border:1px solid rgba(0,0,0,0.06);background:#f5f5f5}
	#info{width:1200px;margin:6px auto 12px auto;text-align:center}
		.hint{font-size:13px;color:#333}
	</style>
</head>
<body>
	<canvas id="gameCanvas" width="1200" height="720"></canvas>
	<div id="info" class="hint">Player1: WASD to move, F to use</div>

	<!-- Share box: shows the URL and QR code so other devices on the same Wi-Fi can join -->
	<div id="shareBox" style="position:fixed;right:14px;bottom:14px;background:rgba(255,255,255,0.95);border-radius:8px;padding:10px 12px;box-shadow:0 6px 18px rgba(0,0,0,0.14);font-size:13px;z-index:999">
	  <div style="font-weight:600;margin-bottom:6px">Share (same Wi‑Fi)</div>
	  <div id="shareUrl" style="word-break:break-all;color:#0366d6;margin-bottom:8px">loading...</div>
	  <img id="shareQr" alt="qr" style="width:96px;height:96px;border-radius:6px;display:block" />
	  <div style="margin-top:8px;color:#444;font-size:12px">Open this link on another device: <br><em>(same Wi‑Fi)</em></div>
	</div>
	<!-- Load the converted game script. It will look for a canvas with id "gameCanvas" or "game" -->
	<!-- socket.io client (served by server_websoc) -->
	<script src="/socket.io/socket.io.js"></script>
	<script>
	  // expose a global to allow game.js to pick up the socket later
	  window.__socket_io_ready = true;
	  // populate share box with current origin so other devices on the LAN can use it
	  (function(){
	    try{
	      const url = location.href;
	      const el = document.getElementById('shareUrl');
	      if(el) el.innerText = url;
	      const qr = document.getElementById('shareQr');
	      if(qr){
	        // use a lightweight public QR generator (qrserver.com)
	        const src = 'https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=' + encodeURIComponent(url);
	        qr.src = src;
	      }
	    }catch(e){}
	  })();
	</script>
	<script src="./game.js"></script>
</body>
</html>